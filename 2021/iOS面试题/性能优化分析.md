# 性能优化分析

## 查看PreMain启动时间

`Edit Scheme` ->`Run` -> `Arguments`->`Environment Variables`
点击`+`号，添加环境变量**DYLD_PRINT_STATISTICS**
如果需要更详细的信息，则添加**DYLD_PRINT_STATISTICS_DETAILE**,设置为1，默认为1

运行app,控制台将打印启动时间。

## 启动优化

查看代码编译流程：

1. Xcode设置
`Build Setting` -> 搜索`link map` -> 将`Write Link Map File` 设置为Yes

2. 重新编译后

	选中`Products`下的`xxx.app`，即应用的包。右键选择`Show in Finder`,选择上上层目录结构中的`Intermediates.noindex`->`XXX.build` -> `XXX-LinkMap-normal-x86_64.txt`
	
打开文件搜索`Symbols`,第一个下面的内容就是代码编译的顺序。

3. 二进制文件重排 
`Build Setting` -> 搜索`order file`,在此处设置重排的顺序，也可在此处引入重排的文件路径,例如：`./sort.order`

**疑问**：从上面可以看到，order文件排序就可以改变编译的顺序，那么怎么知道app首次启动都加载了哪些类和方法呢？？
方案1: 基于llvm插桩,使用AppOrderFiles工具

