# 性能优化分析

## 查看PreMain启动时间

`Edit Scheme` ->`Run` -> `Arguments`->`Environment Variables`
点击`+`号，添加环境变量**DYLD_PRINT_STATISTICS**

运行app,控制台将打印启动时间。

## 生成cpp文件

###方法一:
cd 工程目录文件下
```
clang -rewrite-objc TestObject.m TestObject+V1.m TestObject+V2.m
```
查看即可看到对应的.cpp文件
指定生成文件:
```
clang -rewrite-objc main.m -o main.cpp
```
上面的指令没有指定平台，会生成多平台的C/C++代码

### 方法二：
指定iOS模拟器平台
cd 到文件所在目录
```
xcrun -sdk iphonesimulator clang -arch x86_64 -rewrite-objc main.m
```
指定iOSarm64架构
```
xcrun -sdk iphoneos clang -arch arm64 -rewrite-objc main.m
```
### 指令解释

xcrun -sdk iphoneos clang -arch arm64 -rewrite-objc OC源文件 -o 输出的cpp文件
 
* xcrun: Xcode指令，指定平台为OS平台
* -sdk:为xcrun指令指定参数，例如：iphonesimulator模拟器，iphoneos真机
* clang: 指令，`-arch`用于指定架构，例如：x86_64,arm64,i386,armv7
* -rewrite-objc: 读取oc源文件
* 如果需要链接其他框架，使用-framework参数，比如：-framework UIKit

## 让文件变为可执行文件
```
chmod +x ./test.sh #使脚本具有可执行权限
#或
chmod 777 test.sh
```

